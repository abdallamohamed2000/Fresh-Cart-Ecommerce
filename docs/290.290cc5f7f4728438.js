"use strict";(self.webpackChunkfreshcart=self.webpackChunkfreshcart||[]).push([[290],{5290:(v,m,o)=>{o.r(m),o.d(m,{CartComponent:()=>x});var C=o(8129),p=o(1120),u=o(6814),t=o(4769),_=o(6286);function b(n,h){if(1&n){const e=t.EpF();t.TgZ(0,"div",11)(1,"div",12),t._UZ(2,"img",13),t.qZA(),t.TgZ(3,"div",14)(4,"div",3)(5,"div")(6,"h3",15),t._uU(7),t.ALo(8,"cuttext"),t.qZA(),t.TgZ(9,"p",16)(10,"span",17),t._uU(11,"Price"),t.qZA(),t._uU(12),t.qZA(),t.TgZ(13,"button",18,19),t.NdJ("click",function(){const i=t.CHM(e).$implicit,a=t.MAs(14),d=t.oxw(2);return t.KtG(d.removeCartItem(i.product._id,a))}),t._UZ(15,"i",20),t._uU(16," Remove"),t.qZA()(),t.TgZ(17,"div")(18,"button",21,22),t.NdJ("click",function(){const i=t.CHM(e).$implicit,a=t.MAs(19),d=t.MAs(24),g=t.oxw(2);return t.KtG(g.changeCount(i.product._id,i.count+1,a,d))}),t._UZ(20,"i",23),t.qZA(),t.TgZ(21,"span"),t._uU(22),t.qZA(),t.TgZ(23,"button",21,24),t.NdJ("click",function(){const i=t.CHM(e).$implicit,a=t.MAs(19),d=t.MAs(24),g=t.oxw(2);return t.KtG(g.changeCount(i.product._id,i.count-1,a,d))}),t._UZ(25,"i",25),t.qZA()()()()()}if(2&n){const e=h.$implicit;t.xp6(2),t.Q6J("src",e.product.imageCover,t.LSH),t.xp6(5),t.Oqu(t.xi3(8,4,e.product.title,2)),t.xp6(5),t.hij(" : ",e.price,""),t.xp6(10),t.hij(" ",e.count," ")}}const c=function(n){return["/payment",n]};function l(n,h){if(1&n){const e=t.EpF();t.TgZ(0,"section",2)(1,"div",3)(2,"h1",4),t._uU(3,"Shop Cart"),t.qZA(),t.TgZ(4,"div",5)(5,"p",6),t._uU(6),t.ALo(7,"currency"),t.qZA(),t.TgZ(8,"button",7),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.clear())}),t._uU(9,"Clear Cart"),t.qZA()()(),t.YNc(10,b,26,7,"div",8),t.TgZ(11,"button",9),t._uU(12,"onlinePayment "),t._UZ(13,"img",10),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(6),t.hij(" Total Price : ",t.xi3(7,3,e.cartDetails.totalCartPrice,"EUR")," "),t.xp6(4),t.Q6J("ngForOf",e.cartDetails.products),t.xp6(1),t.Q6J("routerLink",t.VKq(6,c,e.cartDetails._id))}}function f(n,h){1&n&&(t.TgZ(0,"div",26),t._UZ(1,"img",27),t.qZA())}let x=(()=>{class n{constructor(e,r){this._CartService=e,this._Renderer2=r,this.cartDetails=null}removeCartItem(e,r){this._Renderer2.setAttribute(r,"disabled","true"),this._CartService.removeItem(e).subscribe({next:s=>{this.cartDetails=s.data,this._Renderer2.removeAttribute(r,"disabled"),this._CartService.cartNumber.next(s.numOfCartItems)},error:s=>{console.log(s),this._Renderer2.removeAttribute(r,"disabled")}})}ngOnInit(){this._CartService.getUserCart().subscribe({next:e=>{this.cartDetails=e.data},error:e=>{console.log(e)}})}changeCount(e,r,s,i){r>=1&&this._Renderer2.setAttribute(s,"disabled","true"),this._Renderer2.setAttribute(i,"disabled","true"),this._CartService.updateCart(e,r).subscribe({next:a=>{console.log(a.data),this.cartDetails=a.data,this._Renderer2.removeAttribute(s,"disabled"),this._Renderer2.removeAttribute(i,"disabled")},error:a=>{console.log(a),this._Renderer2.removeAttribute(s,"disabled"),this._Renderer2.removeAttribute(i,"disabled")}})}clear(){this._CartService.clearCart().subscribe({next:e=>{"success"===e.message&&(this.cartDetails=null,this._CartService.cartNumber.next(0))},error:e=>{console.log(e)}})}static#t=this.\u0275fac=function(r){return new(r||n)(t.Y36(_.N),t.Y36(t.Qsj))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-cart"]],standalone:!0,features:[t.jDz],decls:3,vars:2,consts:[["class","w-75 mx-auto  p-3  my-2",4,"ngIf","ngIfElse"],["msg",""],[1,"w-75","mx-auto","p-3","my-2"],[1,"d-flex","justify-content-between","align-items-center"],[1,"fw-bolder"],[1,"d-flex","flex-column"],[1,"text-main"],[1,"btn","btn-danger","ms-auto",3,"click"],["class","row border-bottom p-2 my-3 shadow rounded-3",4,"ngFor","ngForOf"],[1,"main-btn","my-2",3,"routerLink"],["src","./assets/images/visa-1.svg","alt","visa"],[1,"row","border-bottom","p-2","my-3","shadow","rounded-3"],[1,"col-md-1"],["alt","",1,"w-100",3,"src"],[1,"col-md-11"],[1,"h5"],[1,"text-main","m-0"],[1,"text-dark"],[1,"btn","p-0","m-0","text-main","remove-hover",3,"click"],["btnRemove",""],[1,"fa-regular","fa-trash-can"],[1,"btn","btn-success",3,"click"],["btn1",""],[1,"fa-solid","fa-plus"],["btn2",""],[1,"fa-solid","fa-minus"],[1,"d-flex","justify-content-center","align-items-center"],["src","./assets/images/cartttempty.jpg","height","500","alt","empty-cart"]],template:function(r,s){if(1&r&&(t.YNc(0,l,14,8,"section",0),t.YNc(1,f,2,0,"ng-template",null,1,t.W1O)),2&r){const i=t.MAs(2);t.Q6J("ngIf",s.cartDetails)("ngIfElse",i)}},dependencies:[u.ez,u.sg,u.O5,u.H9,p.rH,C.r],styles:[".remove-hover[_ngcontent-%COMP%]:hover{color:#086e08}"]})}return n})()},6286:(v,m,o)=>{o.d(m,{N:()=>t});var C=o(5619),p=o(4769),u=o(9862);let t=(()=>{class _{constructor(c){this._HttpClient=c,this.baseUrl="https://ecommerce.routemisr.com/api/v1/",this.cartNumber=new C.X(0)}addToCart(c){return this._HttpClient.post(this.baseUrl+"cart",{productId:c})}getUserCart(){return this._HttpClient.get(this.baseUrl+"cart")}removeItem(c){return this._HttpClient.delete(this.baseUrl+`cart/${c}`)}clearCart(){return this._HttpClient.delete(this.baseUrl+"cart")}updateCart(c,l){return this._HttpClient.put(this.baseUrl+`cart/${c}`,{count:l})}checkOut(c,l){return this._HttpClient.post(this.baseUrl+`orders/checkout-session/${c}?url=http://localhost:4200`,{shippingAddress:l})}static#t=this.\u0275fac=function(l){return new(l||_)(p.LFG(u.eN))};static#e=this.\u0275prov=p.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"})}return _})()}}]);