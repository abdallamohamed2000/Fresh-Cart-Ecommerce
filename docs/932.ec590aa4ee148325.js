"use strict";(self.webpackChunkfreshcart=self.webpackChunkfreshcart||[]).push([[932],{6666:(E,m,s)=>{s.r(m),s.d(m,{LoginComponent:()=>L});var u=s(1120),_=s(6814),r=s(95),o=s(4769),d=s(9410);function c(t,l){1&t&&(o.TgZ(0,"p",17),o._uU(1,"email Is required"),o.qZA())}function f(t,l){1&t&&(o.TgZ(0,"p",17),o._uU(1,"email is invalid"),o.qZA())}function h(t,l){if(1&t&&(o.TgZ(0,"div"),o.YNc(1,c,2,0,"p",16),o.YNc(2,f,2,0,"p",16),o.qZA()),2&t){const e=o.oxw();let i,n;o.xp6(1),o.Q6J("ngIf",null==(i=e.loginForm.get("email"))?null:i.getError("required")),o.xp6(1),o.Q6J("ngIf",null==(n=e.loginForm.get("email"))?null:n.getError("email"))}}function v(t,l){1&t&&(o.TgZ(0,"p",17),o._uU(1,"password Is required"),o.qZA())}function Z(t,l){1&t&&(o.TgZ(0,"p",17),o._uU(1,"password must start with upperCase then from 6 to 20"),o.qZA())}function T(t,l){if(1&t&&(o.TgZ(0,"div"),o.YNc(1,v,2,0,"p",16),o.YNc(2,Z,2,0,"p",16),o.qZA()),2&t){const e=o.oxw();let i,n;o.xp6(1),o.Q6J("ngIf",null==(i=e.loginForm.get("password"))?null:i.getError("required")),o.xp6(1),o.Q6J("ngIf",null==(n=e.loginForm.get("password"))?null:n.getError("pattern"))}}function x(t,l){1&t&&o._UZ(0,"i",18)}function A(t,l){if(1&t&&(o.TgZ(0,"p",19),o._uU(1),o.qZA()),2&t){const e=o.oxw();o.xp6(1),o.Oqu(e.msgError)}}let L=(()=>{class t{constructor(e,i,n){this._AuthService=e,this._Router=i,this._FormBuilder=n,this.msgError="",this.isLoading=!1,this.loginForm=this._FormBuilder.group({email:["",[r.kI.required,r.kI.email]],password:["",[r.kI.required,r.kI.pattern(/^[A-Z][a-z0-9]{6,20}$/)]]})}handleForm(){this.loginForm.valid?(this.isLoading=!0,this._AuthService.setLogin(this.loginForm.value).subscribe({next:e=>{(e.message="success")&&(this.isLoading=!1,localStorage.setItem("eToken",e.token),localStorage.setItem("email",this.loginForm.get("email")?.value),this._AuthService.saveUserData(),this._Router.navigate(["/home"]))},error:e=>{this.isLoading=!1,this.msgError=e.error.message}})):this.loginForm.markAllAsTouched()}static#o=this.\u0275fac=function(i){return new(i||t)(o.Y36(d.e),o.Y36(u.F0),o.Y36(r.qu))};static#t=this.\u0275cmp=o.Xpm({type:t,selectors:[["app-login"]],standalone:!0,features:[o.jDz],decls:23,vars:5,consts:[[1,"shadow","p-4","rounded","my-3","w-50","mx-auto"],[1,"h3","fw-bolder"],[3,"formGroup","ngSubmit"],[1,"mb-2"],["for","email"],["formControlName","email","type","email","id","email",1,"form-control"],["inputEmail",""],[4,"ngIf"],["for","password"],["formControlName","password","type","password","id","password",1,"form-control"],["inputPassword",""],[1,"d-flex","justify-content-between"],["routerLink","/forgot",1,"text-main","forgot","cursor-pointer","fw-medium"],[1,"main-btn","ms-auto","d-block"],["class","fas fa-spinner fa-spin",4,"ngIf"],["class","text-error",4,"ngIf"],["class","text-red",4,"ngIf"],[1,"text-red"],[1,"fas","fa-spinner","fa-spin"],[1,"text-error"]],template:function(i,n){if(1&i&&(o.TgZ(0,"section",0)(1,"h1",1),o._uU(2,"Login Now"),o.qZA(),o.TgZ(3,"form",2),o.NdJ("ngSubmit",function(){return n.handleForm()}),o.TgZ(4,"div",3)(5,"label",4),o._uU(6,"Email :"),o.qZA(),o._UZ(7,"input",5,6),o.YNc(9,h,3,2,"div",7),o.qZA(),o.TgZ(10,"div",3)(11,"label",8),o._uU(12,"Password :"),o.qZA(),o._UZ(13,"input",9,10),o.YNc(15,T,3,2,"div",7),o.qZA(),o.TgZ(16,"div",11)(17,"a",12),o._uU(18,"Forgot Password ?"),o.qZA(),o.TgZ(19,"button",13),o.YNc(20,x,1,0,"i",14),o._uU(21," Login"),o.qZA()(),o.YNc(22,A,2,1,"p",15),o.qZA()()),2&i){const p=o.MAs(8),C=o.MAs(14);let a,g;o.xp6(3),o.Q6J("formGroup",n.loginForm),o.xp6(6),o.Q6J("ngIf",(null==(a=n.loginForm.get("email"))?null:a.errors)&&((null==(a=n.loginForm.get("email"))?null:a.touched)||p.value.length)),o.xp6(6),o.Q6J("ngIf",(null==(g=n.loginForm.get("password"))?null:g.errors)&&((null==(g=n.loginForm.get("password"))?null:g.touched)||C.value.length)),o.xp6(5),o.Q6J("ngIf",n.isLoading),o.xp6(2),o.Q6J("ngIf",n.msgError)}},dependencies:[_.ez,_.O5,r.UX,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,u.rH],styles:[".text-error[_ngcontent-%COMP%]{background-color:#911b1b;color:#fff;width:-moz-fit-content;width:fit-content;border-radius:10px;padding:5px;margin:auto}.text-red[_ngcontent-%COMP%]{color:#b40505;padding-top:2px}.forgot[_ngcontent-%COMP%]:hover{color:green}"]})}return t})()}}]);