"use strict";(self.webpackChunkfreshcart=self.webpackChunkfreshcart||[]).push([[333],{8333:(N,d,l)=>{l.r(d),l.d(d,{UpdatedataComponent:()=>F});var o=l(95),s=l(6814),t=l(4769),g=l(1120),c=l(9410),f=l(2425);function h(e,p){1&e&&(t.TgZ(0,"p",17),t._uU(1,"name Is required"),t.qZA())}function U(e,p){1&e&&(t.TgZ(0,"p",17),t._uU(1,"min-length 3"),t.qZA())}function v(e,p){1&e&&(t.TgZ(0,"p",17),t._uU(1,"max-length 20"),t.qZA())}function T(e,p){if(1&e&&(t.TgZ(0,"div"),t.YNc(1,h,2,0,"p",16),t.YNc(2,U,2,0,"p",16),t.YNc(3,v,2,0,"p",16),t.qZA()),2&e){const a=t.oxw();let r,n,i;t.xp6(1),t.Q6J("ngIf",null==(r=a.updateDataForm.get("name"))?null:r.getError("required")),t.xp6(1),t.Q6J("ngIf",null==(n=a.updateDataForm.get("name"))?null:n.getError("minlength")),t.xp6(1),t.Q6J("ngIf",null==(i=a.updateDataForm.get("name"))?null:i.getError("maxlength"))}}function Z(e,p){1&e&&(t.TgZ(0,"p",17),t._uU(1,"email Is required"),t.qZA())}function x(e,p){1&e&&(t.TgZ(0,"p",17),t._uU(1,"email is invalid"),t.qZA())}function D(e,p){if(1&e&&(t.TgZ(0,"div"),t.YNc(1,Z,2,0,"p",16),t.YNc(2,x,2,0,"p",16),t.qZA()),2&e){const a=t.oxw();let r,n;t.xp6(1),t.Q6J("ngIf",null==(r=a.updateDataForm.get("email"))?null:r.getError("required")),t.xp6(1),t.Q6J("ngIf",null==(n=a.updateDataForm.get("email"))?null:n.getError("email"))}}function A(e,p){1&e&&(t.TgZ(0,"p",17),t._uU(1,"phone Is required"),t.qZA())}function I(e,p){1&e&&(t.TgZ(0,"p",17),t._uU(1,"accept only egypt phone numbers"),t.qZA())}function E(e,p){if(1&e&&(t.TgZ(0,"div"),t.YNc(1,A,2,0,"p",16),t.YNc(2,I,2,0,"p",16),t.qZA()),2&e){const a=t.oxw();let r,n;t.xp6(1),t.Q6J("ngIf",null==(r=a.updateDataForm.get("phone"))?null:r.getError("required")),t.xp6(1),t.Q6J("ngIf",null==(n=a.updateDataForm.get("phone"))?null:n.getError("pattern"))}}function C(e,p){if(1&e&&(t.TgZ(0,"p",18),t._uU(1),t.qZA()),2&e){const a=t.oxw();t.xp6(1),t.Oqu(a.msgError)}}function q(e,p){1&e&&t._UZ(0,"i",19)}let F=(()=>{class e{constructor(a,r,n,i){this._FormBuilder=a,this._Router=r,this._AuthService=n,this._ToastrService=i,this.isLoading=!1,this.outputMssg="",this.msgError="",this.updateDataForm=this._FormBuilder.group({name:["",[o.kI.required,o.kI.minLength(3),o.kI.maxLength(20)]],phone:["",[o.kI.required,o.kI.pattern(/^01[0125][0-9]{8}$/)]],email:["",[o.kI.required,o.kI.email]]})}updateUserData(){this.updateDataForm.valid?(this.isLoading=!0,this._AuthService.updateLoggedUserData(this.updateDataForm.value).subscribe({next:a=>{this.isLoading=!1,this._AuthService.userData.next(a.user),this._ToastrService.success(a.message),this._Router.navigate(["/login"])},error:a=>{this.isLoading=!1,this.msgError=a.error.errors.msg,console.log(a)}})):this.updateDataForm.markAllAsTouched()}static#t=this.\u0275fac=function(r){return new(r||e)(t.Y36(o.qu),t.Y36(g.F0),t.Y36(c.e),t.Y36(f._W))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-updatedata"]],standalone:!0,features:[t.jDz],decls:26,vars:6,consts:[[1,"shadow","p-4","rounded","my-3","w-50","mx-auto","my-4"],[3,"formGroup","ngSubmit"],[1,"h3","fw-bolder"],["for","name"],["type","text","id","name","formControlName","name",1,"form-control"],["inputname",""],[4,"ngIf"],["for","email"],["type","text","id","email","formControlName","email",1,"form-control"],["inputemail",""],["for","phone"],["type","tel","id","phone","formControlName","phone",1,"form-control"],["inputphone",""],["class","text-error",4,"ngIf"],[1,"main-btn","mt-3","ms-auto","d-block"],["class","fas fa-spinner fa-spin",4,"ngIf"],["class","text-red",4,"ngIf"],[1,"text-red"],[1,"text-error"],[1,"fas","fa-spinner","fa-spin"]],template:function(r,n){if(1&r&&(t.TgZ(0,"section",0)(1,"form",1),t.NdJ("ngSubmit",function(){return n.updateUserData()}),t.TgZ(2,"h1",2),t._uU(3,"Update Your Data"),t.qZA(),t.TgZ(4,"div")(5,"label",3),t._uU(6,"Name"),t.qZA(),t._UZ(7,"input",4,5),t.YNc(9,T,4,3,"div",6),t.qZA(),t.TgZ(10,"div")(11,"label",7),t._uU(12,"Email"),t.qZA(),t._UZ(13,"input",8,9),t.YNc(15,D,3,2,"div",6),t.qZA(),t.TgZ(16,"div")(17,"label",10),t._uU(18,"Phone"),t.qZA(),t._UZ(19,"input",11,12),t.YNc(21,E,3,2,"div",6),t.qZA(),t.YNc(22,C,2,1,"p",13),t.TgZ(23,"button",14),t.YNc(24,q,1,0,"i",15),t._uU(25,"Update"),t.qZA()()()),2&r){const i=t.MAs(8),Y=t.MAs(14),J=t.MAs(20);let u,_,m;t.xp6(1),t.Q6J("formGroup",n.updateDataForm),t.xp6(8),t.Q6J("ngIf",(null==(u=n.updateDataForm.get("name"))?null:u.errors)&&((null==(u=n.updateDataForm.get("name"))?null:u.touched)||i.value.length>0)),t.xp6(6),t.Q6J("ngIf",(null==(_=n.updateDataForm.get("email"))?null:_.errors)&&((null==(_=n.updateDataForm.get("email"))?null:_.touched)||Y.value.length>0)),t.xp6(6),t.Q6J("ngIf",(null==(m=n.updateDataForm.get("phone"))?null:m.errors)&&((null==(m=n.updateDataForm.get("phone"))?null:m.touched)||J.value.length)),t.xp6(1),t.Q6J("ngIf",n.msgError),t.xp6(2),t.Q6J("ngIf",n.isLoading)}},dependencies:[s.ez,s.O5,o.UX,o._Y,o.Fj,o.JJ,o.JL,o.sg,o.u]})}return e})()}}]);